# 聊天服务器说明文档
---
## 一. 服务器结构
整个服务器分为3块：中心服务器，聊天服务和网关服。
中心服务器目前是做成单节点，负责服务注册和服务发现，以及在线玩家的管理。
中心服务器3秒内未收到服务发来的心跳，则视为已断线超时，并定时清理超时服务。
聊天服务是主要的聊天功能所在，可水平扩展，会定时向中心服务器发送心跳包。
网关服负责与客户端的长链接，并转发客户端的请求，以及服务器的推送消息。
网关服会定时轮询最新可用的聊天服务列表，以实现服务发现功能。网关服是可以水平扩展的。
客户端与网关服采用TCP长链接通信，服务器之间采用rpc通信
![alt text](http://www.tap2joy.com/images/server.png "服务器架构图")

